(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-17735856"],{"0504":function(e,t,o){},5319:function(e,t,o){"use strict";var s=o("d784"),n=o("825a"),a=o("7b0b"),i=o("50c4"),r=o("a691"),c=o("1d80"),l=o("8aa5"),u=o("14c3"),p=Math.max,d=Math.min,f=Math.floor,h=/\$([$&'`]|\d\d?|<[^>]*>)/g,g=/\$([$&'`]|\d\d?)/g,v=function(e){return void 0===e?e:String(e)};s("replace",2,(function(e,t,o,s){var w=s.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,m=s.REPLACE_KEEPS_$0,I=w?"$":"$0";return[function(o,s){var n=c(this),a=void 0==o?void 0:o[e];return void 0!==a?a.call(o,n,s):t.call(String(n),o,s)},function(e,s){if(!w&&m||"string"===typeof s&&-1===s.indexOf(I)){var a=o(t,e,this,s);if(a.done)return a.value}var c=n(e),f=String(this),h="function"===typeof s;h||(s=String(s));var g=c.global;if(g){var R=c.unicode;c.lastIndex=0}var k=[];while(1){var b=u(c,f);if(null===b)break;if(k.push(b),!g)break;var $=String(b[0]);""===$&&(c.lastIndex=l(f,i(c.lastIndex),R))}for(var y="",C=0,L=0;L<k.length;L++){b=k[L];for(var _=String(b[0]),D=p(d(r(b.index),f.length),0),S=[],P=1;P<b.length;P++)S.push(v(b[P]));var A=b.groups;if(h){var E=[_].concat(S,D,f);void 0!==A&&E.push(A);var M=String(s.apply(void 0,E))}else M=x(_,f,D,S,A,s);D>=C&&(y+=f.slice(C,D)+M,C=D+_.length)}return y+f.slice(C)}];function x(e,o,s,n,i,r){var c=s+e.length,l=n.length,u=g;return void 0!==i&&(i=a(i),u=h),t.call(r,u,(function(t,a){var r;switch(a.charAt(0)){case"$":return"$";case"&":return e;case"`":return o.slice(0,s);case"'":return o.slice(c);case"<":r=i[a.slice(1,-1)];break;default:var u=+a;if(0===u)return t;if(u>l){var p=f(u/10);return 0===p?t:p<=l?void 0===n[p-1]?a.charAt(1):n[p-1]+a.charAt(1):t}r=n[u-1]}return void 0===r?"":r}))}}))},"80cc":function(e,t,o){"use strict";var s=o("0504"),n=o.n(s);n.a},"9d64":function(e,t,o){e.exports=o.p+"img/logo.7960446f.png"},a55b:function(e,t,o){"use strict";o.r(t);var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login"},[s("img",{attrs:{src:o("9d64")}}),s("h2",{staticClass:"title"},[e._v("音乐")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.useLoginInfo.phone,expression:"useLoginInfo.phone"}],staticClass:"phone-inp login-inp",attrs:{type:"text",placeholder:"手机号码",maxlength:"11",autocomplete:"off"},domProps:{value:e.useLoginInfo.phone},on:{input:function(t){t.target.composing||e.$set(e.useLoginInfo,"phone",t.target.value)}}}),s("div",{staticClass:"psd-container"},["checkbox"===(e.ispassword?"password":"text")?s("input",{directives:[{name:"model",rawName:"v-model",value:e.useLoginInfo.password,expression:"useLoginInfo.password"}],staticClass:"login-inp",attrs:{placeholder:"密码 ",maxlength:"16",autocomplete:"off",type:"checkbox"},domProps:{checked:Array.isArray(e.useLoginInfo.password)?e._i(e.useLoginInfo.password,null)>-1:e.useLoginInfo.password},on:{change:function(t){var o=e.useLoginInfo.password,s=t.target,n=!!s.checked;if(Array.isArray(o)){var a=null,i=e._i(o,a);s.checked?i<0&&e.$set(e.useLoginInfo,"password",o.concat([a])):i>-1&&e.$set(e.useLoginInfo,"password",o.slice(0,i).concat(o.slice(i+1)))}else e.$set(e.useLoginInfo,"password",n)}}}):"radio"===(e.ispassword?"password":"text")?s("input",{directives:[{name:"model",rawName:"v-model",value:e.useLoginInfo.password,expression:"useLoginInfo.password"}],staticClass:"login-inp",attrs:{placeholder:"密码 ",maxlength:"16",autocomplete:"off",type:"radio"},domProps:{checked:e._q(e.useLoginInfo.password,null)},on:{change:function(t){return e.$set(e.useLoginInfo,"password",null)}}}):s("input",{directives:[{name:"model",rawName:"v-model",value:e.useLoginInfo.password,expression:"useLoginInfo.password"}],staticClass:"login-inp",attrs:{placeholder:"密码 ",maxlength:"16",autocomplete:"off",type:e.ispassword?"password":"text"},domProps:{value:e.useLoginInfo.password},on:{input:function(t){t.target.composing||e.$set(e.useLoginInfo,"password",t.target.value)}}}),s("van-icon",{staticClass:"psd-eye",attrs:{name:e.ispassword?"closed-eye":"eye-o"},on:{click:function(t){e.ispassword=!e.ispassword}}})],1),s("button",{staticClass:"login-btn",on:{click:e.login}},[e._v("登录")]),s("button",{staticClass:"to-home-at-once",on:{click:e.goHomeAtonce}},[e._v("立即体验")]),s("p",[s("span",{staticClass:"register-text",on:{click:e.showReg}},[e._v("注册")]),s("span",{staticClass:"forget-pwd",on:{click:e.forgetPsd}},[e._v("忘记密码?")])]),s("van-popup",{style:{height:"60%"},attrs:{round:"",position:"bottom"},model:{value:e.regshow,callback:function(t){e.regshow=t},expression:"regshow"}},[s("div",{staticClass:"register-container"},[s("van-form",[s("van-field",{attrs:{name:"用户名",label:"用户名",placeholder:"用户名",autocomplete:"off"},model:{value:e.useRegisterInfo.nickname,callback:function(t){e.$set(e.useRegisterInfo,"nickname",t)},expression:"useRegisterInfo.nickname"}}),s("van-field",{attrs:{name:"手机号码",label:"手机号码",placeholder:"手机号码",autocomplete:"off",maxlength:"11"},model:{value:e.useRegisterInfo.phone,callback:function(t){e.$set(e.useRegisterInfo,"phone",t)},expression:"useRegisterInfo.phone"}}),s("van-field",{attrs:{type:e.ispassword?"password":"text",name:"密码",label:"密码",placeholder:"以字母开头6-16位",autocomplete:"off",maxlength:"16","right-icon":e.ispassword?"closed-eye":"eye-o"},on:{"click-right-icon":function(t){e.ispassword=!e.ispassword}},model:{value:e.useRegisterInfo.password,callback:function(t){e.$set(e.useRegisterInfo,"password",t)},expression:"useRegisterInfo.password"}}),s("div",{staticClass:"Verification-code"},[s("span",{staticClass:"v-text"},[e._v("验证码")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.useRegisterInfo.captcha,expression:"useRegisterInfo.captcha"}],staticClass:"verifcation-inp",staticStyle:{width:"40px"},attrs:{placeholder:"验证码",maxlength:"4",autocomplete:"off"},domProps:{value:e.useRegisterInfo.captcha},on:{input:function(t){t.target.composing||e.$set(e.useRegisterInfo,"captcha",t.target.value)}}}),s("button",{staticClass:"get-verification-code-btn",attrs:{disabled:!e.showCountDown},on:{click:e.getverificationCode}},[e._v(" "+e._s(e.showCountDown?"获取验证码":e.countDown+"后获取")+" ")])]),s("div",{staticStyle:{margin:"16px"}},[s("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit",color:"#ff0c46"},on:{click:e.Register}},[e._v(" 注册 ")])],1)],1)],1)]),s("van-popup",{style:{height:"60%"},attrs:{round:"",position:"bottom"},model:{value:e.psdshow,callback:function(t){e.psdshow=t},expression:"psdshow"}},[s("div",{staticClass:"register-container"},[s("van-form",[s("van-field",{attrs:{name:"用户名",label:"用户名",placeholder:"用户名",autocomplete:"off"},model:{value:e.useRegisterInfo.nickname,callback:function(t){e.$set(e.useRegisterInfo,"nickname",t)},expression:"useRegisterInfo.nickname"}}),s("van-field",{attrs:{name:"手机号码",label:"手机号码",placeholder:"手机号码",autocomplete:"off",maxlength:"11"},model:{value:e.useRegisterInfo.phone,callback:function(t){e.$set(e.useRegisterInfo,"phone",t)},expression:"useRegisterInfo.phone"}}),s("van-field",{attrs:{type:e.ispassword?"password":"text",name:"密码",label:"密码",placeholder:"以字母开头6-16位",autocomplete:"off",maxlength:"16","right-icon":e.ispassword?"closed-eye":"eye-o"},on:{"click-right-icon":function(t){e.ispassword=!e.ispassword}},model:{value:e.useRegisterInfo.password,callback:function(t){e.$set(e.useRegisterInfo,"password",t)},expression:"useRegisterInfo.password"}}),s("div",{staticClass:"Verification-code"},[s("span",{staticClass:"v-text"},[e._v("验证码")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.useRegisterInfo.captcha,expression:"useRegisterInfo.captcha"}],staticClass:"verifcation-inp",staticStyle:{width:"40px"},attrs:{placeholder:"验证码",maxlength:"4",autocomplete:"off"},domProps:{value:e.useRegisterInfo.captcha},on:{input:function(t){t.target.composing||e.$set(e.useRegisterInfo,"captcha",t.target.value)}}}),s("button",{staticClass:"get-verification-code-btn",attrs:{disabled:!e.showCountDown},on:{click:e.getcaptcha}},[e._v(" "+e._s(e.showCountDown?"获取验证码":e.countDown+"后获取")+" ")])]),s("div",{staticStyle:{margin:"16px"}},[s("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit",color:"#ff0c46"},on:{click:e.forgetPassword}},[e._v(" 确认修改 ")])],1)],1)],1)])],1)},n=[];o("99af"),o("ac1f"),o("5319");function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var o=0;o<t.length;o++){var s=t[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function r(e,t,o){return t&&i(e.prototype,t),o&&i(e,o),e}o("9a83");var c=o("f564"),l=o("2b0e");l["a"].use(c["a"]);var u=function(){function e(){a(this,e)}return r(e,[{key:"valid",value:function(e){for(var t in e)if(!e[t].reg.test(e[t].value))return Object(c["a"])({type:"warning",message:e[t].errorMsg}),!1;return!0}}]),e}(),p=new u,d={data:function(){return{useLoginInfo:{phone:"",password:""},useRegisterInfo:{nickname:"",phone:"",password:"",captcha:""},regshow:!1,ispassword:!0,countDown:"",showCountDown:!0,timer:null,psdshow:!1}},methods:{showReg:function(){this.regshow=!0},forgetPsd:function(){this.psdshow=!0},goHomeAtonce:function(){this.$router.push({name:"Home"})},login:function(){var e=this;this.$toast.loading({duration:0,message:"加载中...",forbidClick:!0});var t=this.useLoginInfo,o={phone:{value:t.phone,reg:/^1[3-9]\d{9}$/,errorMsg:"手机号格式不正确"},password:{value:t.password,reg:/^\w{6,16}$/,errorMsg:"密码格式不正确"}};p.valid(o)?this.axios("/login/cellphone?phone=".concat(this.useLoginInfo.phone,"&password=").concat(this.useLoginInfo.password)).then((function(t){if(e.$toast.clear(),502===t.data.code)e.$toast(t.data.msg);else if(200===t.data.code){var o=t.data.cookie,s=t.data.account.id;window.localStorage.setItem("musicToken",o),window.localStorage.setItem("uid",s),e.$toast("登录成功 "),e.$router.replace({name:"Home"})}})).catch((function(t){console.error(t),e.$toast.clear()})):this.$toast.clear()},Register:function(){var e=this,t=this.useRegisterInfo,o={nickName:{value:t.nickname,reg:/^[\w\u4e00-\u9fa5]{1,10}$/,errorMsg:"昵称格式不正确"},phone:{value:t.phone,reg:/^1[3-9]\d{9}$/,errorMsg:"手机号格式不正确"},password:{value:t.password,reg:/^[A-Za-z]\w{5,15}$/,errorMsg:"密码格式不正确"}};p.valid(o)&&this.useRegisterInfo.phone&&this.useRegisterInfo.password&&this.axios("/cellphone/existence/check?phone="+this.useRegisterInfo.phone).then((function(t){1!==t.data.exist||200!==t.data.code?-1===t.data.exist&&200===t.data.code&&e.axios("/captcha/verify?phone=".concat(e.useRegisterInfo.phone,"&captcha=").concat(e.useRegisterInfo.captcha)).then((function(t){200===t.data.code?e.axios("/register/cellphone?phone=".concat(e.useRegisterInfo.phone,"&password=").concat(e.useRegisterInfo.password,"&captcha=").concat(e.useRegisterInfo.captcha,"&nickname=").concat(e.useRegisterInfo.nickname)):e.$toast("验证码错误")})):e.$toast("账号已存在")}))},getverificationCode:function(){var e=this,t=/^1[3-9]\d{9}$/,o=this.useRegisterInfo.phone;t.test(o)?this.useRegisterInfo.phone&&this.axios("cellphone/existence/check?phone="+this.useRegisterInfo.phone).then((function(t){if(1!==t.data.exist||200!==t.data.code){if(-1===t.data.exist&&200===t.data.code){var o=60;e.timer||(e.countDown=o,e.showCountDown=!1,e.timer=setInterval((function(){e.countDown>0&&e.countDown<=o?e.countDown--:(e.showCountDown=!0,clearInterval(e.timer),e.timer=null)}),1e3)),e.$toast("验证码发送成功"),e.axios("/captcha/sent?phone="+e.useRegisterInfo.phone)}}else e.$toast("账号已存在")})):this.$toast("手机格式不正确")},getcaptcha:function(){var e=this,t=/^1[3-9]\d{9}$/,o=this.useRegisterInfo.phone;if(t.test(o)){if(this.useRegisterInfo.phone){var s=60;this.timer||(this.countDown=s,this.showCountDown=!1,this.timer=setInterval((function(){e.countDown>0&&e.countDown<=s?e.countDown--:(e.showCountDown=!0,clearInterval(e.timer),e.timer=null)}),1e3)),this.axios("/captcha/sent?phone="+this.useRegisterInfo.phone).then((function(t){200===t.data.code&&e.$toast("发送成功")}))}}else this.$toast("手机格式不正确")},forgetPassword:function(){var e=this,t=this.useRegisterInfo,o={nickName:{value:t.nickname,reg:/^[\w\u4e00-\u9fa5]{1,10}$/,errorMsg:"昵称格式不正确"},phone:{value:t.phone,reg:/^1[3-9]\d{9}$/,errorMsg:"手机号格式不正确"},password:{value:t.password,reg:/^[A-Za-z]\w{5,15}$/,errorMsg:"密码格式不正确"}};p.valid(o)&&this.useRegisterInfo.phone&&this.useRegisterInfo.password&&this.axios("/captcha/verify?phone=".concat(this.useRegisterInfo.phone,"&captcha=").concat(this.useRegisterInfo.captcha)).then((function(t){200===t.data.code&&e.axios("/register/cellphone?phone=".concat(e.useRegisterInfo.phone,"&password=").concat(e.useRegisterInfo.password,"&captcha=").concat(e.useRegisterInfo.captcha,"&nickname=").concat(e.useRegisterInfo.nickname))}))}}},f=d,h=(o("80cc"),o("2877")),g=Object(h["a"])(f,s,n,!1,null,"2dd551d5",null);t["default"]=g.exports}}]);
//# sourceMappingURL=chunk-17735856.099b3b21.js.map